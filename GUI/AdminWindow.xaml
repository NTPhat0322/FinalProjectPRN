<Window x:Class="GUI.AdminWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:GUI"
        mc:Ignorable="d"
        Title="Admin Dashboard" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <!-- Common Styles -->
        <Style TargetType="Button">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="15,5"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Height" Value="30"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5,2"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="ComboBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5,2"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="Label">
            <Setter Property="Margin" Value="5,5,5,0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <Style TargetType="DataGrid">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="AlternatingRowBackground" Value="#F5F5F5"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="CanUserReorderColumns" Value="False"/>
            <Setter Property="CanUserResizeRows" Value="False"/>
            <Setter Property="SelectionMode" Value="Single"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
        </Style>

        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Width" Value="80"/>
            <Setter Property="Margin" Value="2"/>
        </Style>

        <Style x:Key="SearchBox" TargetType="TextBox">
            <Setter Property="Width" Value="250"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style x:Key="TabHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2c3e50" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Admin Dashboard" FontSize="20" Foreground="White" VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="txtUsername" Text="Admin" Foreground="White" VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <Button Content="Đăng xuất" Width="80" Click="LogoutButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="10">
            <!-- Services Tab -->
            <TabItem>
                <TabItem.Header>
                    <TextBlock Text="Dịch vụ" Style="{StaticResource TabHeaderStyle}"/>
                </TabItem.Header>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Search and Add Section -->
                    <Grid Grid.Row="0" Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <TextBox x:Name="txtSearchService" Width="250" 
                                     Style="{StaticResource SearchBox}" 
                                     TextChanged="TxtSearchService_TextChanged"
                                     VerticalAlignment="Center" 
                                     Padding="5"
                                     Text=""
                                     FontSize="14" 
                                     Foreground="#555" />
                            <Button Content="Tìm" Width="80" Click="SearchServiceButton_Click"/>
                            <Button Content="Xóa" Width="80" Click="ClearServiceSearchButton_Click" Margin="5,5,0,5"/>
                        </StackPanel>

                        <Button Grid.Column="1" Content="Thêm mới" Click="AddServiceButton_Click" 
                                Background="#27ae60" Foreground="White" FontWeight="SemiBold"/>
                    </Grid>

                    <!-- DataGrid for Services -->
                    <DataGrid Grid.Row="2" x:Name="dgServices" Margin="5" SelectionChanged="DgServices_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                            <DataGridTextColumn Header="Tên" Binding="{Binding Name}" Width="200"/>
                            <DataGridTextColumn Header="Giá" Binding="{Binding Price, StringFormat='{}{0:C}'}" Width="100"/>
                            <DataGridTextColumn Header="Mô tả" Binding="{Binding Description}" Width="*"/>
                            <DataGridTemplateColumn Header="Hành động" Width="180">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="Sửa" Style="{StaticResource ActionButton}" 
                                                    Click="EditServiceButton_Click" 
                                                    Background="#3498db" Foreground="White"/>
                                            <Button Content="Xóa" Style="{StaticResource ActionButton}" 
                                                    Click="DeleteServiceButton_Click" 
                                                    Background="#e74c3c" Foreground="White"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Service Form Section (Hidden initially) -->
                    <Border Grid.Row="3" x:Name="serviceFormPanel" Visibility="Collapsed" 
                            BorderBrush="#CCCCCC" BorderThickness="0,1,0,0" Padding="10" Margin="5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="Service Information" 
                                     FontSize="16" FontWeight="SemiBold" Margin="5,5,5,15"/>

                            <StackPanel Grid.Row="1" Grid.Column="0">
                                <Label Content="Service Name:"/>
                                <TextBox x:Name="txtServiceName"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="1">
                                <Label Content="Price:"/>
                                <TextBox x:Name="txtServicePrice"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.ColumnSpan="2">
                                <Label Content="Description:"/>
                                <TextBox x:Name="txtServiceDescription" Height="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                            </StackPanel>

                            <StackPanel Grid.Row="3" Grid.ColumnSpan="2" Orientation="Horizontal" 
                                      HorizontalAlignment="Right" Margin="0,15,5,5">
                                <Button Content="Save" x:Name="btnSaveService" Click="SaveServiceButton_Click" 
                                      Background="#27ae60" Foreground="White" FontWeight="SemiBold"/>
                                <Button Content="Cancel" Click="CancelServiceButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Departments Tab -->
            <TabItem>
                <TabItem.Header>
                    <TextBlock Text="Phòng ban" Style="{StaticResource TabHeaderStyle}"/>
                </TabItem.Header>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Search and Add Section -->
                    <Grid Grid.Row="0" Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5*"/>
                            <ColumnDefinition Width="147*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal" Grid.ColumnSpan="2">
                            <TextBox x:Name="txtSearchDepartment" Style="{StaticResource SearchBox}" 
                                     TextChanged="TxtSearchDepartment_TextChanged"/>
                            <Button Content="Tìm" Width="80" Click="SearchDepartmentButton_Click"/>
                            <Button Content="Xóa" Width="80" Click="ClearDepartmentSearchButton_Click" Margin="5,5,0,5"/>
                        </StackPanel>

                        <Button Grid.Column="2" Content="Thêm mới" Click="AddDepartmentButton_Click" 
                                Background="#27ae60" Foreground="White" FontWeight="SemiBold" Margin="5,5,5,5"/>
                    </Grid>

                    <!-- DataGrid for Departments -->
                    <DataGrid Grid.Row="1" x:Name="dgDepartments" SelectionChanged="DgDepartments_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                            <DataGridTextColumn Header="Tên phòng ban" Binding="{Binding Name}" Width="*"/>
                            <DataGridTemplateColumn Header="Hành động" Width="180">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="Sửa" Style="{StaticResource ActionButton}" 
                                                    Click="EditDepartmentButton_Click" 
                                                    Background="#3498db" Foreground="White"/>
                                            <Button Content="Xóa" Style="{StaticResource ActionButton}" 
                                                    Click="DeleteDepartmentButton_Click" 
                                                    Background="#e74c3c" Foreground="White"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Department Form Section (Hidden initially) -->
                    <Border Grid.Row="2" x:Name="departmentFormPanel" Visibility="Collapsed" 
                            BorderBrush="#CCCCCC" BorderThickness="0,1,0,0" Padding="10" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="Department Information" 
                                     FontSize="16" FontWeight="SemiBold" Margin="5,5,5,15"/>

                            <StackPanel Grid.Row="1">
                                <Label Content="Department Name:"/>
                                <TextBox x:Name="txtDepartmentName"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Orientation="Horizontal" 
                                      HorizontalAlignment="Right" Margin="0,15,5,5">
                                <Button Content="Save" x:Name="btnSaveDepartment" Click="SaveDepartmentButton_Click" 
                                      Background="#27ae60" Foreground="White" FontWeight="SemiBold"/>
                                <Button Content="Cancel" Click="CancelDepartmentButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Staff Info Tab -->
            <TabItem>
                <TabItem.Header>
                    <TextBlock Text="Thông tin nhân viên" Style="{StaticResource TabHeaderStyle}"/>
                </TabItem.Header>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Search and Add Section -->
                    <Grid Grid.Row="0" Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <TextBox x:Name="txtSearchStaff" Style="{StaticResource SearchBox}" 
                                     TextChanged="TxtSearchStaff_TextChanged"/>
                            <Button Content="Tìm" Width="80" Click="SearchStaffButton_Click"/>
                            <Button Content="Xóa" Width="80" Click="ClearStaffSearchButton_Click" Margin="5,5,0,5"/>
                        </StackPanel>

                        <Button Grid.Column="1" Content="Thêm mới" Click="AddStaffButton_Click" 
                                Background="#27ae60" Foreground="White" FontWeight="SemiBold"/>
                    </Grid>

                    <!-- DataGrid for Staff Info -->
                    <DataGrid Grid.Row="1" x:Name="dgStaffInfo" SelectionChanged="DgStaffInfo_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                            <DataGridTextColumn Header="Tên nhân viên" Binding="{Binding StaffName}" Width="180"/>
                            <DataGridTextColumn Header="Phòng ban" Binding="{Binding DepartmentName}" Width="150"/>
                            <DataGridTextColumn Header="Bằng cấp" Binding="{Binding Degree}" Width="150"/>
                            <DataGridTextColumn Header="Kinh nghiệm (năm)" Binding="{Binding YearOfExperience}" Width="120"/>
                            <DataGridTemplateColumn Header="Hành động" Width="180">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Content="Sửa" Style="{StaticResource ActionButton}" 
                                                    Click="EditStaffButton_Click" 
                                                    Background="#3498db" Foreground="White"/>
                                            <Button Content="Xóa" Style="{StaticResource ActionButton}" 
                                                    Click="DeleteStaffButton_Click" 
                                                    Background="#e74c3c" Foreground="White"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Staff Info Form Section (Hidden initially) -->
                    <Border Grid.Row="2" x:Name="staffFormPanel" Visibility="Collapsed" 
                            BorderBrush="#CCCCCC" BorderThickness="0,1,0,0" Padding="10" Margin="5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="Staff Information" 
                                     FontSize="16" FontWeight="SemiBold" Margin="5,5,5,15"/>

                            <StackPanel Grid.Row="1" Grid.Column="0">
                                <Label Content="Account:"/>
                                <ComboBox x:Name="cmbStaffAccount" DisplayMemberPath="Name" SelectedValuePath="Id"/>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="1">
                                <Label Content="Department:"/>
                                <ComboBox x:Name="cmbStaffDepartment" DisplayMemberPath="Name" SelectedValuePath="Id"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="0">
                                <Label Content="Degree:"/>
                                <TextBox x:Name="txtStaffDegree"/>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="1">
                                <Label Content="Years of Experience:"/>
                                <TextBox x:Name="txtStaffExperience"/>
                            </StackPanel>

                            <StackPanel Grid.Row="3" Grid.ColumnSpan="2" Orientation="Horizontal" 
                                      HorizontalAlignment="Right" Margin="0,15,5,5">
                                <Button Content="Save" x:Name="btnSaveStaff" Click="SaveStaffButton_Click" 
                                      Background="#27ae60" Foreground="White" FontWeight="SemiBold"/>
                                <Button Content="Cancel" Click="CancelStaffButton_Click"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
